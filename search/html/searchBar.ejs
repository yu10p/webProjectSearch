<!DOCTYPE html>
<html>
    <head>
        <title>this is SearchBar</title>
        <style>  
            .form{
                margin-left: 5%;
                margin-bottom: 10px;
            }
            div.result{
                margin-left: 5%;
            }
            div.wrap {
                margin-left: 5%;
                width: 90%;
                display: flex;
                vertical-align: top;
            }
            div.wrap div{
                display: inline-block;
                vertical-align: top;
            }
            div.productPhoto {
                display:flex;
                width: 150px;
                height: 150px;
                border: 3px solid #73AD21;
            }
            div.productPhoto img{
                max-width: 100%;
                max-height: 100%;
            }
            div.productDescribe {
                width: inherit;
                height: 150px;
                border: 3px solid #73AD21;
            }
            div.productDescribe div{
                display: flex;
                height: 50px;
                align-items: center; 
            }       
        </style>
    </head>
    <body>
        <form class="form" action="/product" method="get">
            <input type="text" id="productSearch" name="productName">
            <button type="submit">Search</button>
        </form>
        <form class="form" action="/Myproduct" method="get">
            <input type="text" id="productSearch" name="productName">
            <input type="text" id="productSearch" name="userId">
            <button type="submit">MySearch</button>
        </form>
        <% if(JSON.stringify(result)!="[]"){ %>
            <div class="result">
                <% if(productName!=""){ %>
                    符合" <%= productName %> "的搜尋結果!
                <%}%>
            </div>
            <% for(var i=0;i<result.length;i++) {%>
            <div class="wrap">
                <div class="productPhoto">
                    <img alt="<%= JSON.stringify(result[i].productName).replace(/\"/g,"")%>" src="data:image;base64,<%= received[i].productPhoto.toString('base64')%>">
                </div>
                <div class="productDescribe">
                    <div class="productName">
                        商品名稱 : <%= JSON.stringify(result[i].productName).replace(/\"/g,"")%>
                    </div>
                    <div class="productPrice">
                        價格 : <%= JSON.stringify(result[i].productPrice).replace(/\"/g,"")%>
                    </div>
                    <div class="userId">
                        販售商 : <%= JSON.stringify(result[i].userId).replace(/\"/g,"")%>
                    </div>
                </div>
            </div>
            <%}%>
        <%}else{%>
            <div class="result">
                未找到符合" <%= productName %> "的商品!
            </div>
        <%}%>
    </body>
</html>
